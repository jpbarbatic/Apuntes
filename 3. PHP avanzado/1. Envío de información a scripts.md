# EnvÃ­o de informaciÃ³n a scripts

Para enviar informaciÃ³n de un script se utilizan los mÃ©todos HTTP, **GET** y **POST**. 
Las peticiones **GET** y **POST** son los dos mÃ©todos HTTP mÃ¡s utilizados para **enviar datos desde un cliente (navegador) a un servidor** en aplicaciones web.Entender la diferencia entre ambos, cuÃ¡ndo usarlos y cÃ³mo manejarlos en PHP es **fundamental** para desarrollar formularios seguros, dinÃ¡micos y funcionales.

---

## ğŸŒ Â¿QuÃ© son GET y POST?

Son **mÃ©todos de la peticiÃ³n HTTP** que definen **cÃ³mo se envÃ­an los datos** del cliente al servidor.

| CaracterÃ­stica | `GET` | `POST` |
|----------------|------|--------|
| **DÃ³nde van los datos** | En la **URL** (como parÃ¡metros: `?nombre=Ana&edad=25`) | En el **cuerpo de la peticiÃ³n** (invisible en la URL) |
| **Visibilidad** | âœ… Visible para el usuario | âŒ No visible en la URL |
| **Longitud mÃ¡xima** | Limitada (~2048 caracteres, depende del navegador) | **Sin lÃ­mite prÃ¡ctico** (limitado por configuraciÃ³n del servidor) |
| **Seguridad** | âŒ No seguro para datos sensibles (contraseÃ±as, etc.) | âœ… MÃ¡s seguro (aunque **no cifrado**: usa HTTPS para seguridad real) |
| **Almacenamiento en historial** | âœ… SÃ­ (queda en la URL) | âŒ No |
| **IndexaciÃ³n por buscadores** | âœ… SÃ­ | âŒ No |
| **Idempotencia** | âœ… Se puede repetir sin efectos secundarios | âŒ Puede causar efectos (ej: crear un registro) |
| **Variables superglobales en PHP** | `$_GET` | `$_POST` |

---

## ğŸ” 1. PeticiÃ³n **GET**

### Â¿CuÃ¡ndo usarla?
- Para **obtener datos** (bÃºsquedas, filtros, paginaciÃ³n).
- Cuando los datos **no son sensibles**.
- Cuando quieres que el resultado sea **compartible** (por la URL).

### Ejemplo de formulario HTML:
```html
<form method="get" action="buscar.php">
    <input type="text" name="q" placeholder="Buscar...">
    <button type="submit">Buscar</button>
</form>
```
> âš ï¸ **NOTA:** La peticiÃ³n **GET** puede realizar sin usar un formulario, simplemente creando una URL con los parÃ¡metros correspondientes y accediendo a la misma.

Al enviar, la URL queda asÃ­:  
`http://tusitio.com/buscar.php?q=php`

### En PHP: acceder con `$_GET`
```php
// buscar.php
if (isset($_GET['q'])) {
    $busqueda = $_GET['q'];
    echo "Buscaste: " . htmlspecialchars($busqueda);
}
```

> âš ï¸ **Nunca confÃ­es en `$_GET`**: siempre **valida y sanea** los datos (usa `htmlspecialchars()` al mostrarlos para evitar XSS).

---

## ğŸ”’ 2. PeticiÃ³n **POST**

### Â¿CuÃ¡ndo usarla?
- Para **enviar datos sensibles** (login, registro, pagos).
- Para **modificar datos** en el servidor (crear, actualizar, eliminar).
- Cuando los datos son **largos** (comentarios, descripciones, etc.).

### Ejemplo de formulario HTML:
```html
<form method="post" action="login.php">
    <input type="text" name="usuario" required>
    <input type="password" name="clave" required>
    <button type="submit">Entrar</button>
</form>
```

La URL **no cambia**: sigue siendo `http://tusitio.com/login.php`

### En PHP: acceder con `$_POST`
```php
// login.php
if ($_POST['usuario'] && $_POST['clave']) {
    $usuario = $_POST['usuario'];
    $clave = $_POST['clave'];

    // Â¡Nunca compares contraseÃ±as en texto plano!
    // Usa password_verify() con hashes.
    if ($usuario === "admin" && $clave === "1234") {
        echo "Acceso permitido";
    } else {
        echo "Usuario o contraseÃ±a incorrectos";
    }
}
```

> ğŸ” **Importante**:
> - **Nunca muestres contraseÃ±as en texto plano**.
> - **Siempre usa `htmlspecialchars()`** al imprimir datos del usuario.
> - **Valida y filtra** todos los datos de `$_POST`.

---

## ğŸ›¡ï¸ Buenas prÃ¡cticas de seguridad en IAW

| PrÃ¡ctica | ExplicaciÃ³n |
|--------|-------------|
| **Saneamiento** | Usa `htmlspecialchars($dato, ENT_QUOTES, 'UTF-8')` al mostrar en HTML. |
| **ValidaciÃ³n** | Comprueba que los datos tengan el formato esperado (email, nÃºmero, etc.). |
| **No confÃ­es en el cliente** | Todo lo que venga de `$_GET` o `$_POST` puede ser manipulado. |
| **Protege contra CSRF** | En formularios importantes, usa tokens (aunque en IAW no es obligatorio, es bueno mencionarlo). |
| **Usa HTTPS en producciÃ³n** | Tanto GET como POST viajan en texto plano sin HTTPS. |

---

## ğŸ”„ Â¿Y si no se especifica `method` en el formulario?

Por defecto, el mÃ©todo es **`GET`**:
```html
<form action="procesar.php"> <!-- equivale a method="get" -->
```

> âœ… **Siempre especifica explÃ­citamente** `method="post"` o `method="get"`.

---

## ğŸ§ª CÃ³mo detectar el mÃ©todo de la peticiÃ³n en PHP

Puedes saber quÃ© mÃ©todo usÃ³ el cliente con:
```php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Procesar POST
} elseif ($_SERVER['REQUEST_METHOD'] === 'GET') {
    // Procesar GET
}
```

> Ãštil si un mismo script maneja ambos mÃ©todos.

---

## ğŸ“ Ejemplo integrado: formulario de contacto

### `contacto.php`
```html
<form method="post" action="enviar.php">
    <input type="text" name="nombre" placeholder="Tu nombre" required>
    <input type="email" name="email" placeholder="Tu email" required>
    <textarea name="mensaje" placeholder="Mensaje" required></textarea>
    <button type="submit">Enviar</button>
</form>
```

### `enviar.php`
```php
<?php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {

    $nombre = trim($_POST['nombre'] ?? '');
    $email = trim($_POST['email'] ?? '');
    $mensaje = trim($_POST['mensaje'] ?? '');

    // ValidaciÃ³n bÃ¡sica
    if (empty($nombre) || empty($email) || empty($mensaje)) {
        die("Todos los campos son obligatorios.");
    }

    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        die("Email invÃ¡lido.");
    }

    // Mostrar (en producciÃ³n, enviarÃ­a un email o guardarÃ­a en BBDD)
    echo "<h2>Gracias, " . htmlspecialchars($nombre) . "!</h2>";
    echo "<p>Hemos recibido tu mensaje.</p>";
}
?>
```

> **NOTA:** Este ejemplo integra: POST, validaciÃ³n, saneamiento y buenas prÃ¡cticas.

---

## ğŸ“Œ Resumen visual

| CaracterÃ­stica | GET | POST |
|---------------|-----|------|
| **Datos en URL** | âœ… SÃ­ | âŒ No |
| **Seguridad** | Baja | Media (usa HTTPS para alta) |
| **Uso tÃ­pico** | BÃºsquedas, filtros | Login, formularios, envÃ­os |
| **Variable PHP** | `$_GET` | `$_POST` |
| **Â¿Se puede refrescar?** | âœ… SÃ­ (sin efectos) | âš ï¸ Puede reenviar datos |

