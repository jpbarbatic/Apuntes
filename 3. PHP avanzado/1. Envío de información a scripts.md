# Env√≠o de informaci√≥n a scripts

Para enviar informaci√≥n de un script se utilizan los m√©todos HTTP, **GET** y **POST**. 
Las peticiones **GET** y **POST** son los dos m√©todos HTTP m√°s utilizados para **enviar datos desde un cliente (navegador) a un servidor** en aplicaciones web.Entender la diferencia entre ambos, cu√°ndo usarlos y c√≥mo manejarlos en PHP es **fundamental** para desarrollar formularios seguros, din√°micos y funcionales.

---

## ¬øQu√© son GET y POST?

Son **m√©todos de la petici√≥n HTTP** que definen **c√≥mo se env√≠an los datos** del cliente al servidor.

| Caracter√≠stica | `GET` | `POST` |
|----------------|------|--------|
| **D√≥nde van los datos** | En la **URL** (como par√°metros: `?nombre=Ana&edad=25`) | En el **cuerpo de la petici√≥n** (invisible en la URL) |
| **Visibilidad** | ‚úÖ Visible para el usuario | ‚ùå No visible en la URL |
| **Longitud m√°xima** | Limitada (~2048 caracteres, depende del navegador) | **Sin l√≠mite pr√°ctico** (limitado por configuraci√≥n del servidor) |
| **Seguridad** | ‚ùå No seguro para datos sensibles (contrase√±as, etc.) | ‚úÖ M√°s seguro (aunque **no cifrado**: usa HTTPS para seguridad real) |
| **Almacenamiento en historial** | ‚úÖ S√≠ (queda en la URL) | ‚ùå No |
| **Indexaci√≥n por buscadores** | ‚úÖ S√≠ | ‚ùå No |
| **Idempotencia** | ‚úÖ Se puede repetir sin efectos secundarios | ‚ùå Puede causar efectos (ej: crear un registro) |
| **Variables superglobales en PHP** | `$_GET` | `$_POST` |

---

##  Petici√≥n **GET**

### ¬øCu√°ndo usarla?
- Para **obtener datos** (b√∫squedas, filtros, paginaci√≥n).
- Cuando los datos **no son sensibles**.
- Cuando quieres que el resultado sea **compartible** (por la URL).

### Ejemplo de formulario HTML:
```html
<form method="get" action="buscar.php">
    <input type="text" name="q" placeholder="Buscar...">
    <button type="submit">Buscar</button>
</form>
```
> ‚ö†Ô∏è **NOTA:** La petici√≥n **GET** puede realizar sin usar un formulario, simplemente creando una URL con los par√°metros correspondientes y accediendo a la misma.

Los par√°mtros se colocan despu√©s de la URL, colocando el s√≠mbolo **?**, y a continuaci√≥n los par√°metros y los valores, separados por el s√≠mbolo **&**.

Al enviar, la URL queda as√≠:  
`http://tusitio.com/buscar.php?q=php`

Si quisieramos mandar m√°s par√°mentros:
`http://tusitio.com/buscar.php?q=php&pagina=1&orden=id`

### En PHP: acceder con `$_GET`
```php
// buscar.php
if (isset($_GET['q'])) {
    $busqueda = $_GET['q'];
    echo "Buscaste: " . htmlspecialchars($busqueda);
}
```

> ‚ö†Ô∏è **Nunca conf√≠es en `$_GET`**: siempre **valida y sanea** los datos (usa `htmlspecialchars()` al mostrarlos para evitar XSS).

---

## Petici√≥n **POST**

### ¬øCu√°ndo usarla?
- Para **enviar datos sensibles** (login, registro, pagos).
- Para **modificar datos** en el servidor (crear, actualizar, eliminar).
- Cuando los datos son **largos** (comentarios, descripciones, etc.).

### Ejemplo de formulario HTML:
```html
<form method="post" action="login.php">
    <input type="text" name="usuario" required>
    <input type="password" name="clave" required>
    <button type="submit">Entrar</button>
</form>
```

La URL **no cambia**: sigue siendo `http://tusitio.com/login.php`

### En PHP: acceder con `$_POST`
```php
// login.php
if ($_POST['usuario'] && $_POST['clave']) {
    $usuario = $_POST['usuario'];
    $clave = $_POST['clave'];

    // ¬°Nunca compares contrase√±as en texto plano!
    // Usa password_verify() con hashes.
    if ($usuario === "admin" && $clave === "1234") {
        echo "Acceso permitido";
    } else {
        echo "Usuario o contrase√±a incorrectos";
    }
}
```

> üîê **Importante**:
> - **Nunca muestres contrase√±as en texto plano**.
> - **Siempre usa `htmlspecialchars()`** al imprimir datos del usuario.
> - **Valida y filtra** todos los datos de `$_POST`.

---

## üõ°Ô∏è Buenas pr√°cticas de seguridad en IAW

| Pr√°ctica | Explicaci√≥n |
|--------|-------------|
| **Saneamiento** | Usa `htmlspecialchars($dato, ENT_QUOTES, 'UTF-8')` al mostrar en HTML. |
| **Validaci√≥n** | Comprueba que los datos tengan el formato esperado (email, n√∫mero, etc.). |
| **No conf√≠es en el cliente** | Todo lo que venga de `$_GET` o `$_POST` puede ser manipulado. |
| **Protege contra CSRF** | En formularios importantes, usa tokens (aunque en IAW no es obligatorio, es bueno mencionarlo). |
| **Usa HTTPS en producci√≥n** | Tanto GET como POST viajan en texto plano sin HTTPS. |

---

## ¬øY si no se especifica `method` en el formulario?

Por defecto, el m√©todo es **`GET`**:
```html
<form action="procesar.php"> <!-- equivale a method="get" -->
```

> ‚úÖ **Siempre especifica expl√≠citamente** `method="post"` o `method="get"`.

---

## C√≥mo detectar el m√©todo de la petici√≥n en PHP

Puedes saber qu√© m√©todo us√≥ el cliente con:
```php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Procesar POST
} elseif ($_SERVER['REQUEST_METHOD'] === 'GET') {
    // Procesar GET
}
```

> √ötil si un mismo script maneja ambos m√©todos.

---

## Ejemplo integrado: formulario de contacto

### `contacto.php`
```html
<form method="post" action="enviar.php">
    <input type="text" name="nombre" placeholder="Tu nombre" required>
    <input type="email" name="email" placeholder="Tu email" required>
    <textarea name="mensaje" placeholder="Mensaje" required></textarea>
    <button type="submit">Enviar</button>
</form>
```

### `enviar.php`
```php
<?php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {

    $nombre = trim($_POST['nombre'] ?? '');
    $email = trim($_POST['email'] ?? '');
    $mensaje = trim($_POST['mensaje'] ?? '');

    // Validaci√≥n b√°sica
    if (empty($nombre) || empty($email) || empty($mensaje)) {
        die("Todos los campos son obligatorios.");
    }

    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        die("Email inv√°lido.");
    }

    // Mostrar (en producci√≥n, enviar√≠a un email o guardar√≠a en BBDD)
    echo "<h2>Gracias, " . htmlspecialchars($nombre) . "!</h2>";
    echo "<p>Hemos recibido tu mensaje.</p>";
}
?>
```

> **NOTA:** Este ejemplo integra: POST, validaci√≥n, saneamiento y buenas pr√°cticas.

---

##  Resumen visual

| Caracter√≠stica | GET | POST |
|---------------|-----|------|
| **Datos en URL** | ‚úÖ S√≠ | ‚ùå No |
| **Seguridad** | Baja | Media (usa HTTPS para alta) |
| **Uso t√≠pico** | B√∫squedas, filtros | Login, formularios, env√≠os |
| **Variable PHP** | `$_GET` | `$_POST` |
| **¬øSe puede refrescar?** | ‚úÖ S√≠ (sin efectos) | ‚ö†Ô∏è Puede reenviar datos |

